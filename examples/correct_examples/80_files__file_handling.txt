// TEST: file operations (OPEN/READ/WRITE/CLOSE + EOF)
// EXPECTED: valid

// Example 1: Use a STRING variable as the file identifier

DECLARE fileName : STRING
DECLARE line : STRING

fileName <- "example_file.txt"

// WRITE mode: create/overwrite the file
OPENFILE fileName FOR WRITE
WRITEFILE fileName, "First line\n"
WRITEFILE fileName, "Second line\n"
CLOSEFILE fileName

// APPEND mode: add to the end of the existing file
OPENFILE fileName FOR APPEND
WRITEFILE fileName, "Appended line\n"
CLOSEFILE fileName

// READ mode: read lines until EOF
OPENFILE fileName FOR READ
WHILE NOT EOF(fileName)
    READFILE fileName, line
    OUTPUT line
ENDWHILE
CLOSEFILE fileName


// Example 2: Use a literal string as the file identifier

DECLARE txt : STRING

OPENFILE "notes.txt" FOR WRITE
WRITEFILE "notes.txt", "Hello from notes.txt\n"
WRITEFILE "notes.txt", "Another line\n"
CLOSEFILE "notes.txt"

OPENFILE "notes.txt" FOR READ
WHILE NOT EOF("notes.txt")
    READFILE "notes.txt", txt
    OUTPUT "Read: " & txt
ENDWHILE
CLOSEFILE "notes.txt"