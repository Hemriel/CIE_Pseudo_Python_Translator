// Scope tests: nested mixed scopes (FUNCTION scope exists; IF/FOR/WHILE do NOT create scopes)
// EXPECTED: valid

DECLARE x : INTEGER
x <- 1

FUNCTION F(x : INTEGER) RETURNS INTEGER
    // x is parameter here
    DECLARE acc : INTEGER
    acc <- 0

    IF TRUE THEN
        // No redeclaration of x here (no IF scope).
        DECLARE bump : INTEGER
        bump <- 10

        DECLARE i : INTEGER
        FOR i <- 0 TO 2
            // i is in the function scope; x resolves to parameter; acc resolves to function-local
            WHILE i < 2
                acc <- acc + x + bump
                // break the loop by modifying i (keeps it simple for semantics)
                i <- 2
            ENDWHILE
        NEXT i
    ENDIF

    RETURN acc
ENDFUNCTION

DECLARE r : INTEGER
r <- F(5)
OUTPUT "r=", r
OUTPUT "global x=", x
